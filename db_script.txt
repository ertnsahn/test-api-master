CREATE DATABASE ESDATABASE1
GO
USE ESDATABASE1
GO
 
 CREATE TABLE [Rooms] (
          [Id] int NOT NULL IDENTITY,
          [CreateOn] datetime2 NOT NULL,
          [Name] nvarchar(max) NULL,
          CONSTRAINT [PK_Rooms] PRIMARY KEY ([Id])
      );
GO
      CREATE TABLE [Rezervations] (
          [Id] int NOT NULL IDENTITY,
          [CreateOn] datetime2 NOT NULL,
          [RoomId] int NULL,
          [OwnerName] nvarchar(max) NULL,
          [OwnerEmail] nvarchar(max) NULL,
          [RezervationStart] datetime2 NOT NULL,
          [RezervationEnd] datetime2 NOT NULL,
          CONSTRAINT [PK_Rezervations] PRIMARY KEY ([Id]),
          CONSTRAINT [FK_Rezervations_Rooms_RoomId] FOREIGN KEY ([RoomId]) REFERENCES [Rooms] ([Id]) ON DELETE NO ACTION
      );
GO
      CREATE TABLE [Members] (
          [Id] int NOT NULL IDENTITY,
          [CreateOn] datetime2 NOT NULL,
          [Email] nvarchar(max) NULL,
          [State] int NOT NULL,
          [RezervationId] int NULL,
          CONSTRAINT [PK_Members] PRIMARY KEY ([Id]),
          CONSTRAINT [FK_Members_Rezervations_RezervationId] FOREIGN KEY ([RezervationId]) REFERENCES [Rezervations] ([Id]) ON DELETE NO ACTION
      );
GO
INSERT INTO Rooms VALUES(GETDATE(),'K1')
INSERT INTO Rooms VALUES(GETDATE(),'K2')
INSERT INTO Rooms VALUES(GETDATE(),'K3')